# Building the Maps

With the functions we created:

-   **custom map theme:** `apply_custom_theme()`
-   filters PLACES by measure, **categorizes values by county:** `classify_ntl_deviation()`
-   **generate legend labels:** `generate_legend_labels()`

The functions above feed into the function to create our maps:

-   **create map sets** for a given measure: `create_PLACES_maps`

## Apply `create_PLACES_maps` function:

Our process for creating a series of maps for any given measure simplifies down to running:

```{r, eval = FALSE}

depression_maps <- create_PLACES_maps(
  measure = "Depression among adults", 
  data = PLACES, 
  counties = all_counties, 
  boundary = MT_boundary, 
  theme_function = apply_custom_theme
)

```

::: {layout-nrow="1"}
![Depression: Using Jenks Classification](_maps\depression_jenks_plot.png){.lightbox}

![Depression: Comparing to National Median](_maps\depression_ntl_med_plot.png){.lightbox}
:::

## More `create_PLACES_maps` examples:

We can run this function again for any measure that we would like to see within the PLACES dataset. For example:

```{r, eval = FALSE}

housing_maps <- create_PLACES_maps(
  measure = "Housing Insecurity among adults", 
  data = PLACES, 
  counties = all_counties, 
  boundary = MT_boundary, 
  theme_function = apply_custom_theme
)

```

::: {layout-nrow="1"}
![Housing: Using Jenks Classification](_maps\housing_jenks_plot.png){.lightbox}

![Housing: Comparing to National Median](_maps\housing_ntl_med_plot.png){.lightbox}
:::

This function-based approach is especially helpful when you want to make a series of various maps pulling from the same dataset. It encodes that your theme elements are the same, giving your maps a consisted "brand", look, and feel.

Another huge benefit is that if you'd like to make adjustments to how the maps are being generated, whether that be a change to the analytical / statistical categorization of data, or any aesthetic element to the map, all you have to do is adjust those elements within the function one time, instead of having to go through and change every single map that you made. This significantly reduces time, effort, and errors. Once you create and source the functions themselves, the amount of code lines required for your maps is a small fraction of what it would be otherwise.

For example, let's say I no longer liked this red color because I think it is too alarming. I wanted to change it to a yellow-ish color instead. All I had to do was go inside the `create_PLACES_maps()` function and switch out the hex codes. I renamed it as a new function, called `create_PLACES_maps_YL()`:

```{r, eval = FALSE}

PLACES <- PLACES %>%
  
mutate(Measure = ifelse(
  Measure == "Food insecurity in the past 12 months among adults", 
  "Food insecurity among adults", Measure))

food_maps <- create_PLACES_maps_YL(
  measure = "Food insecurity among adults", 
  data = PLACES, 
  counties = all_counties, 
  boundary = MT_boundary, 
  theme_function = apply_custom_theme)


```

VOILA!ðŸ¥³ðŸŽ‰

New maps in seconds, and a new color scheme that can be applied across the board to any measure.

::: {layout-nrow="1"}
![Housing: Using Jenks Classification](_maps\food_jenks_plotV.png){.lightbox}

![Housing: Comparing to National Median](_maps\food_ntl_med_plotV.png){.lightbox}
:::
